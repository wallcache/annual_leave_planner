<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timewell - Annual Leave Planner UK | Plan Holiday Days & Maximise Time Off</title>
    <meta name="description" content="Free UK annual leave planner. Visualise your holiday year, calculate ROI on time off, and plan around bank holidays. Works with England, Wales & Scotland calendars.">
    <meta name="keywords" content="annual leave planner, UK holiday planner, annual leave calculator, bank holiday planner, holiday ROI, time off planner, leave management, England Wales Scotland holidays, AL planner">
    <meta name="author" content="Hal Wall">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://timewell.uk/">

    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://timewell.uk/">
    <meta property="og:title" content="Timewell - Annual Leave Planner UK">
    <meta property="og:description" content="Free UK annual leave planner. Visualise your holiday year, calculate ROI on time off, and plan around bank holidays.">
    <meta property="og:image" content="https://timewell.uk/social_banner.jpg">
    <meta property="og:site_name" content="Timewell">
    <meta property="og:locale" content="en_GB">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Timewell - Annual Leave Planner UK">
    <meta name="twitter:description" content="Free UK annual leave planner. Visualise your holiday year, calculate ROI on time off, and plan around bank holidays.">
    <meta name="twitter:image" content="https://timewell.uk/social_banner.jpg">

    <!-- Structured Data / JSON-LD -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Timewell",
        "headline": "Annual Leave Planner UK",
        "description": "Free UK annual leave planner. Visualise your holiday year, calculate ROI on time off, and plan around bank holidays. Works with England, Wales & Scotland calendars.",
        "url": "https://timewell.uk/",
        "applicationCategory": "ProductivityApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "GBP"
        },
        "author": {
            "@type": "Person",
            "name": "Hal Wall"
        },
        "browserRequirements": "Requires JavaScript. Requires HTML5.",
        "softwareVersion": "1.0",
        "screenshot": "https://timewell.uk/social_banner.jpg",
        "featureList": [
            "Visual annual leave calendar",
            "UK bank holiday integration",
            "ROI calculation for time off",
            "Support for England, Wales and Scotland",
            "Custom leave year start dates",
            "Manager message generator"
        ],
        "keywords": "annual leave, holiday planner, UK, bank holidays, time off, leave calculator"
    }
    </script>

    <link rel="icon" type="image/png" href="twAsset_logo.png">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Clear Toast (outside app so visible over settings) -->
    <div id="clear-toast" class="glass-panel hidden">
        <span>Previously selected days off have been cleared</span>
    </div>

    <!-- Setup Panel - Modal overlay on first load -->
    <div id="setup-overlay" class="overlay">
        <div id="setup-panel" class="glass-panel modal">
            <img src="twAsset_logo.png" alt="Timewell" class="setup-logo">
            <h1>Welcome to Timewell</h1>
            <p class="subtitle">Plan your annual leave with clarity</p>

            <form id="setup-form">
                <div class="form-group">
                    <label for="allowance">Annual leave allowance</label>
                    <input type="number" id="allowance" min="1" max="50" value="25" required>
                    <span class="hint">days per year</span>
                </div>

                <div class="form-group">
                    <label>Year to plan</label>
                    <div class="year-selector-group">
                        <label class="year-option-label">
                            <input type="radio" name="year" value="2025">
                            <span>2025</span>
                        </label>
                        <label class="year-option-label">
                            <input type="radio" name="year" value="2026" checked>
                            <span>2026</span>
                        </label>
                        <label class="year-option-label">
                            <input type="radio" name="year" value="2027">
                            <span>2027</span>
                        </label>
                        <label class="year-option-label">
                            <input type="radio" name="year" value="2028">
                            <span>2028</span>
                        </label>
                        <label class="year-option-label" title="gosh you plan ahead don't you">
                            <input type="radio" name="year" value="2029">
                            <span>2029</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="region">UK region</label>
                    <select id="region" required>
                        <option value="england-wales">England & Wales</option>
                        <option value="scotland">Scotland</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Working days</label>
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="workday" value="1" checked>
                            <span>Mon</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="workday" value="2" checked>
                            <span>Tue</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="workday" value="3" checked>
                            <span>Wed</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="workday" value="4" checked>
                            <span>Thu</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="workday" value="5" checked>
                            <span>Fri</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="workday" value="6">
                            <span>Sat</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="workday" value="0">
                            <span>Sun</span>
                        </label>
                    </div>
                </div>

                <!-- Advanced Settings -->
                <div class="advanced-settings-section">
                    <button type="button" class="advanced-toggle" id="advanced-toggle">
                        <span class="toggle-icon">â–¶</span>
                        <span>Advanced Settings</span>
                    </button>
                    <div class="advanced-content hidden" id="advanced-content">
                        <div class="form-group">
                            <label>Bank holidays require annual leave?</label>
                            <div class="checkbox-group">
                                <label class="checkbox-label checkbox-wide" id="bank-holiday-toggle">
                                    <input type="checkbox" id="bank-holidays-use-al">
                                    <span>Yes, I must use AL for bank holidays</span>
                                </label>
                            </div>
                            <p class="hint advanced-hint">Leave unchecked if bank holidays are free</p>
                        </div>

                        <div class="form-group">
                            <label>Leave year starts</label>
                            <div class="leave-year-start">
                                <select id="leave-year-month">
                                    <option value="0" selected>January</option>
                                    <option value="1">February</option>
                                    <option value="2">March</option>
                                    <option value="3">April</option>
                                    <option value="4">May</option>
                                    <option value="5">June</option>
                                    <option value="6">July</option>
                                    <option value="7">August</option>
                                    <option value="8">September</option>
                                    <option value="9">October</option>
                                    <option value="10">November</option>
                                    <option value="11">December</option>
                                </select>
                                <select id="leave-year-day">
                                    <option value="1" selected>1</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn-primary">Start Planning</button>
                </div>
                <div class="form-actions-secondary">
                    <button type="button" class="btn-danger-text" id="start-over-btn">Start Over</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Label Modal - Shown after drag selection -->
    <div id="label-overlay" class="overlay hidden">
        <div id="label-panel" class="glass-panel modal modal-small">
            <h2>Label this leave</h2>
            <p id="label-summary" class="selection-summary"></p>

            <form id="label-form" autocomplete="off">
                <div class="form-group">
                    <input type="text" id="leave-label" placeholder="e.g. Rome Trip, Christmas" maxlength="30" autofocus autocomplete="off" data-lpignore="true" data-form-type="other">
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="cancel-label">Cancel</button>
                    <button type="submit" class="btn-primary">Save Leave</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Modal - For editing existing leave blocks -->
    <div id="edit-overlay" class="overlay hidden">
        <div id="edit-panel" class="glass-panel modal modal-small">
            <h2>Edit Leave</h2>
            <p id="edit-summary" class="selection-summary"></p>

            <form id="edit-form">
                <input type="hidden" id="edit-block-id">
                <div class="form-group">
                    <input type="text" id="edit-label" placeholder="Leave label" maxlength="30" required>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-danger" id="delete-leave">Delete</button>
                    <button type="button" class="btn-secondary" id="cancel-edit">Cancel</button>
                    <button type="submit" class="btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Generate Plan Modal -->
    <div id="plan-overlay" class="overlay hidden">
        <div id="plan-panel" class="glass-panel modal modal-large">
            <h2>Your Leave Plan</h2>

            <div id="plan-content">
                <div id="plan-summary-section">
                    <h3>Days to Book Off</h3>
                    <div id="plan-days-list"></div>
                </div>

                <div id="plan-message-section" class="hidden">
                    <h3>Message for Manager</h3>
                    <div id="plan-message-formatted" class="formatted-message"></div>
                    <div class="copy-actions">
                        <button type="button" class="btn-secondary" id="copy-message">Copy to Clipboard</button>
                    </div>
                </div>
            </div>

            <div class="modal-actions">
                <button type="button" class="btn-primary" id="generate-message-btn">Generate Manager Message</button>
                <button type="button" class="btn-secondary" id="close-plan">Close</button>
            </div>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="app" class="hidden">
        <!-- Header -->
        <header id="header">
            <div class="header-left">
                <img src="main_logo.png" alt="Timewell" class="logo-main">
                <span id="year-display" class="year-badge"></span>
            </div>
            <div class="header-right">
                <button id="settings-btn" class="btn-icon" title="Settings">Settings</button>
                <button id="generate-plan-btn" class="btn-primary">Generate Plan</button>
            </div>
        </header>

        <!-- Live Selection Feedback -->
        <div id="selection-feedback" class="glass-panel hidden">
            <div class="feedback-content">
                <div class="feedback-row">
                    <span class="feedback-label">Leave days:</span>
                    <span id="feedback-days" class="feedback-value"></span>
                </div>
                <div class="feedback-row">
                    <span class="feedback-label">Total days off:</span>
                    <span id="feedback-total" class="feedback-value highlight"></span>
                </div>
                <div class="feedback-row roi">
                    <span class="feedback-label">ROI:</span>
                    <span id="feedback-roi" class="feedback-value"></span>
                </div>
            </div>
        </div>

        <!-- Compressed Year Overview (Always visible on right) -->
        <aside id="mini-year-compact" class="glass-panel" title="Click to expand">
            <div class="compact-header">
                <span class="compact-title">Year Overview</span>
                <span class="expand-icon"></span>
            </div>
            <div id="mini-year-compact-grid"></div>
        </aside>

        <!-- Expanded Year Overview Panel (Floating overlay from right) -->
        <aside id="mini-year-sidebar" class="glass-panel hidden">
            <div class="sidebar-header">
                <h3 class="sidebar-title">Year Overview</h3>
                <button id="collapse-sidebar" class="btn-collapse" title="Close">
                    <span class="collapse-icon"></span>
                </button>
            </div>
            <div id="sidebar-content">
                <div id="mini-year"></div>
                <div id="bank-holidays-list">
                    <h4>Bank Holidays</h4>
                    <ul id="bank-holidays-ul"></ul>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <div id="main-content">
            <!-- Calendar Container -->
            <main id="calendar-container">
                <div id="calendar"></div>
            </main>
        </div>

        <!-- Floating Summary Panel -->
        <aside id="summary-panel" class="glass-panel">
            <div class="summary-row">
                <span class="summary-label">Remaining</span>
                <span id="summary-remaining" class="summary-value highlight">25</span>
            </div>
            <div class="summary-divider"></div>
            <div class="summary-row">
                <span class="summary-label">Leave used</span>
                <span id="summary-used" class="summary-value">0</span>
            </div>
            <div class="summary-row">
                <span class="summary-label">Days off gained</span>
                <span id="summary-gained" class="summary-value">0</span>
            </div>
            <div class="summary-row roi">
                <span class="summary-label">ROI</span>
                <span id="summary-roi" class="summary-value">-</span>
            </div>
        </aside>

        <!-- Undo Toast -->
        <div id="undo-toast" class="glass-panel hidden">
            <span>Leave deleted</span>
            <button id="undo-btn" class="btn-link">Undo</button>
        </div>


        <!-- Click Selection Hint -->
        <div id="click-hint" class="glass-panel hidden">
            <span>Click end date to complete selection</span>
            <button id="hide-hint-forever" class="btn-link">Don't show again</button>
        </div>

        <!-- Footer -->
        <footer id="app-footer">
            <div class="footer-content">
                <div class="footer-designer">
                    <p><strong>Designed and Built<br>by Hal Wall</strong></p>
                </div>
                <div class="footer-about">
                    <p>This is annual leave planning stripped of its usual clunkiness and dressed in clarity. It offers delightful visual insight into your year ahead and calculates the ROI of your relaxation; because if one must escape, one should do it with mathematical precision.</p>
                </div>
                <div class="footer-support">
                    <p><em>A small contribution keeps this alive.</em></p>
                    <a href="https://buymeacoffee.com/halwall" target="_blank" rel="noopener noreferrer" class="coffee-link">Buy me a coffee</a>
                </div>
            </div>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>
